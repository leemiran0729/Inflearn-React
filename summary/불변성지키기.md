# 리액트 불변성 지키기

- 불변성이란 값이나 상태를 변경할 수 없는 것
- 원시타입은 불변성을 가지고 있고 참조 타입은 불변성을 가지고 있지 않음

  - 원시 타입: Boolean, String, Number, undefined, null, Symbol
  - 참조 타입: Object, Array

- 기본적으로 JavaScript는 원시타입에 대한 참조 및 값을 Call Stack 메모리 공간을 사용하고
  참조타입의 경우는 Heap이라는 메모리 공간을 활용하여 Call Stack에 Heap 메모리 참조 ID를 값으로 저장

  - 원시타입: 고정된 크기로 Call Stack 메모리에 저장, 실제 데이터가 변수에 할당
    - 원시타입의 값을 수정시 기존 값이 대체되는 것이 아니라 메모리 영역에 새로 할당됨
  - 참조타입: 데이터 크기가 정해지지 않고, Call Stack 메모리에 저장, 데이터의 값이 heap에 저장되고 변수에 heap 메모리 주소값이 할당
    - 배열 등 참조타입에 요소를 추가하거나 변경할 때는 Call Stack의 참조 ID는 동일하게 유지되므로 불변성을 유지해줘야 함

- 불변성은 왜 지켜야하는가?

  - 참조 타입의 값이 변해버리면 원본 데이터를 참조하고 있던 다른 객체마저 오류가 발생할 수 있음
  - 리액트는 화면 업데이트 시 이전 값과 비교하여 업데이트하는 데 이전 값을 유지시켜서 변경된 값과 비교할 필요가 있음

- 불변성을 지키는 방법
  - spread, map, filter, slice, reduce => 기존 값을 가지고 있거나 새로운 배열을 반환
  - 원본 데이터 변경 (불변성유지X) : splice, push 조심하자
